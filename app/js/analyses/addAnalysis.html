<form id="add-analysis-form" novalidate ng-submit="addAnalysis(analysis)">
    <div class="row">
        <div class="large-9 columns">
            <h3>Add a new Analysis</h3>
        </div>
    </div>
    <div class="row">
        <div class="large-9 columns">
            <label>Title
                <input id="title-input" autofocus="true" type="text" ng-model="analysis.title">
            </label>
        </div>
    </div>
    <div class="row">
        <div class="large-9 columns">
            <label>Outcome
                <input id="outcome-input" type="text" ng-model="analysis.outcome">
            </label>
        </div>
    </div>
    <div class="row">
        <div class="large-9 columns" ng-model="showInfo">
            <span style="line-height: 2.5em">
                <label style="display: inline;">Problem file</label>
                <a><i ng-click="showInfo = !showInfo" style="font-size: 1.4em; vertical-align: middle;" class="fa fa-info-circle"> </i></a>
            </span>
            <div ng-show="showInfo" class="panel info class="large-6 columns"">
                <p>The problem file must contain a single json object representing the problem. The problem must contain the 'entries' and 'treatments" fields.
                    The "treatments" field must contain a list of objects that each contain a name and id.
                    The entries must be a list of data rows.
                    Each data row must contain at least the "study" and "treatment" columns.
                    The "treatment" column of each entry must refer to an id present in the treatments list.
                    Each data row must have the same columns as the first data row.</p>
                <a ng-click="showInfo = !showInfo" style="text-decoration: underline;">hide</a>
            </div>
            <file-reader model="analysis.problemFile"></file-reader>
            
        </div>
    </div>
    <div class="row">
        <div class="large-9 columns" ng-show="problemValidity && !problemValidity.isValid" >
            <span style="color: red;">The problem is invalid</span>
            <div style="color: red;">{{problemValidity.message}}</div>
        </div>
    </div>
    <div class="row modal-bottom-button-bar">
        <div class="large-9 columns">
            <button id="submit-add-analysis-btn" class="success" type="submit" ng-disabled="isAddButtonDisabled(analysis) || !problemValidity.isValid">Add</button>
        </div>
    </div>
    <a class="close-reveal-modal" ng-click="cancel()">&#215;</a>
</form>