<form id="add-model-form" novalidate ng-submit="createModel(model)">
  <div class="row">
    <div class="large-12 columns">
      <h3 id="create-model-header">Create new model</h3>
    </div>
  </div>
  <div class="row">
    <div class="large-12 columns">
      <div class="row section">
        <div class="large-4 small-12 columns">
          <label class="form-item-header">Title
            <small>required</small>
            <input id="title-input" autofocus="true" type="text" ng-model="model.title">
          </label>
        </div>
      </div>
      <div class="row section">
        <div class="large-4 small-12 columns">
          <label class="form-item-header">Fixed/Random effect(s)
            <div class="stacked-radio">
              <input type="radio" value="random" ng-model="model.linearModel " id="random-effect-radio">
              <label for="random-effect-radio">Random effects</label>
            </div>
            <div class="stacked-radio">
              <input type="radio" value="fixed" ng-model="model.linearModel" id="fixed-effect-radio">
              <label for="fixed-effect-radio">Fixed effect</label>
            </div>
          </label>
        </div>
      </div>
      <div class="row section">
        <div class="large-6 small-12 columns">
          <label class="form-item-header">Model Type</label>
          <div class="stacked-radio">
            <input type="radio" value="network" ng-model="model.modelType.mainType" id="network-model-type-radio" ng-change="modelTypeChange()">
            <label for="network-model-type-radio">Network meta-analysis</label>
          </div>
          <div class="stacked-radio">
            <input type="radio" value="pairwise" ng-model="model.modelType.mainType" id="pairwise-model-main-type-radio" ng-change="modelTypeChange()" ng-disabled="comparisonOptions.length === 0">
            <label for="pairwise-model-main-type-radio">Pair-wise analysis <em ng-show="comparisonOptions.length === 0"> (Not possible for this analysis)</em></label>
          </div>
          <div class="indent-one" ng-show="model.modelType.mainType == 'pairwise'">
            <label for="comparison-select">Select comparison for which to perform pair-wise analysis</label>
            <div class="stacked-radio">
              <input type="radio" value="all-pairwise" ng-model="model.modelType.subType" id="all-pairwise-model-type-radio">
              <label for="all-pairwise-model-type-radio">All pairwise meta-analyses (batch)</label>
            </div>
            <div class="stacked-radio">
              <span>
                <input type="radio" value="specific-pairwise" ng-model="model.modelType.subType" id="pairwise-specific-type-radio">
                <label for="pairwise-specific-type-radio">Specific pair</label>
                <select class="large-6" ng-options="comparison.label for comparison in comparisonOptions" ng-model="model.pairwiseComparison" id="comparison-select" ng-disabled="model.modelType.subType !== 'specific-pairwise'"></select>
              </span>
            </div>
          </div>
          <div class="stacked-radio">
            <input type="radio" value="node-split" ng-model="model.modelType.mainType" id="node-split-model-main-type-radio" ng-change="modelTypeChange()" ng-disabled="nodeSplitOptions.length === 0">
            <label for="node-split-model-main-type-radio">Node-splitting analysis <em ng-show="nodeSplitOptions.length === 0"> (Not possible for this analysis)</em></label>
          </div>
          <div class="indent-one" ng-show="model.modelType.mainType == 'node-split'">
            <label for="comparison-select">Select comparison for which to perform node-splitting analysis</label>
            <div class="stacked-radio">
              <input type="radio" value="all-node-split" ng-model="model.modelType.subType" id="all-node-split-model-type-radio">
              <label for="all-node-split-model-type-radio">All models</label>
            </div>
            <div class="stacked-radio">
              <span>
             <input type="radio" value="specific-node-split" ng-model="model.modelType.subType" id="node-split-specific-type-radio">
              <label for="node-split-specific-type-radio">Specific model</label>
              <select class="large-6" ng-options="nodeSplitOption.label for nodeSplitOption in nodeSplitOptions" ng-model="model.nodeSplitComparison" id="node-split-select" ng-disabled="model.modelType.subType !== 'specific-node-split'"></select>
            </span>
            </div>
          </div>
        </div>
      </div>
      <!-- end model type section -->
      <div class="row section">
        <div class="columns large-6 medium-6 small-12">
          <label class="form-item-header">Likelihood/Link</label>
          <label>Select a likelihood/link type
            <select class="large-8" ng-options="option.label group by option.compatibility for option in likelihoodLinkOptions" ng-model="model.likelihoodLink" id="likelihood-link-select"></select>
          </label>
        </div>
      </div>
      <div class="row ">
        <div class="columns large-8 medium-10 small-12">
          <label ng-show="model.likelihoodLink.compatibility === 'incompatible'" style="margin-bottom:1rem; color:red">The dataset does not contain all the required columns: {{ model.likelihoodLink.missingColumnsLabel }}.</label>
          <label ng-show="model.likelihoodLink.compatibility !== 'incompatible'" style="margin-bottom:2.25rem"> </label>
          <!-- spacer -->
        </div>
      </div>
      <!-- end likelihood/link section -->
      <div class="row section">
        <div class="large-6 medium-8 small-12 columns">
          <label class="form-item-header">Outcome scale</label>
          <div class="stacked-radio">
            <input type="radio" value="heuristically" ng-model="model.outcomeScale.type" id="heuristically-model-outcom-scale-type-radio" ng-change="outcomeScaleTypeChange()">
            <label for="heuristically-model-outcom-scale-type-radio">Determine heuristically</label>
          </div>
          <div class="stacked-radio">
            <input type="radio" value="fixed" ng-model="model.outcomeScale.type" id="fixed-model-outcom-scale-type-radio" ng-change="outcomeScaleTypeChange()">
            <label for="fixed-model-outcom-scale-type-radio">Fixed value</label>
            <input type="number" ng-model="model.outcomeScale.value" id="fixed-outcome-scale-input" ng-disabled="model.outcomeScale.type !== 'fixed'" ng-change="fixedOutcomeScaleValueChage()" style="display: inline; width:18%;">
          </div>
        </div>
      </div>
      <!-- end outcome scale section -->
      <div class="row section">
        <div class="large-6 medium-8 small-12 columns">
          <label class="form-item-header">Heterogeneity prior</label>
        </div>
      </div>
      <div class="row">
        <div class="columns large-6 stacked-radio">
          <input type="radio" value="automatic" ng-model="model.heterogeneityPrior.type" id="heterogeneity-prior-automatic-radio" ng-change="heterogeneityPriorTypechange()">
          <label for="heterogeneity-prior-automatic-radio">Determine heuristically</label>
        </div>
      </div>
      <div class="row">
        <div class="columns large-3 stacked-radio">
          <input type="radio" value="standard-deviation" ng-model="model.heterogeneityPrior.type" id="heterogeneity-prior-standard-deviation-radio" ng-change="heterogeneityPriorTypechange()">
          <label for="heterogeneity-prior-standard-deviation-radio">Uniform for standard deviation</label>
        </div>
        <div class="columns large-2 text-right">
          lower:
          <input type="number" ng-model="model.heterogeneityPrior.values.lower" id="heterogeneity-uniform-parameter1-input" ng-disabled="model.heterogeneityPrior.type !== 'standard-deviation'" ng-change="heterogeneityParamsChange()" style="display: inline; width:40%;">
        </div>
        <div class="columns large-2 text-right end">
          <div>
            upper:
            <input type="number" ng-model="model.heterogeneityPrior.values.upper" id="heterogeneity-uniform-parameter2-input" ng-disabled="model.heterogeneityPrior.type !== 'standard-deviation'" ng-change="heterogeneityParamsChange()" style="display: inline; width:40%;">
          </div>
        </div>
      </div>
      <div class="row">
        <div class="columns large-3 stacked-radio">
          <input type="radio" value="variance" ng-model="model.heterogeneityPrior.type" id="heterogeneity-prior-variance-radio" ng-change="heterogeneityPriorTypechange()">
          <label for="heterogeneity-prior-variance-radio">Log-N for variance</label>
        </div>
        <div class="columns large-2 text-right">
          std.dev:
          <input type="number" ng-model="model.heterogeneityPrior.values.stdDev" id="heterogeneity-log-n-parameter2-input" ng-disabled="model.heterogeneityPrior.type !== 'variance'" ng-change="heterogeneityParamsChange()" style="display: inline; width:40%;">
        </div>
        <div class="columns large-2 text-right end">
          mean:
          <input type="number" ng-model="model.heterogeneityPrior.values.mean" id="heterogeneity-log-n-parameter1-input" ng-disabled="model.heterogeneityPrior.type !== 'variance'" ng-change="heterogeneityParamsChange()" style="display: inline; width:40%;">
        </div>
      </div>
      <div class="row">
        <div class="columns large-3 stacked-radio">
          <input type="radio" value="precision" ng-model="model.heterogeneityPrior.type" id="heterogeneity-prior-precision-radio" ng-change="heterogeneityPriorTypechange()">
          <label for="heterogeneity-prior-precision-radio">Gamma for precision</label>
        </div>
        <div class="columns large-2 text-right">
          rate:
          <input type="number" ng-model="model.heterogeneityPrior.values.rate" id="heterogeneity-gamma-parameter1-input" ng-disabled="model.heterogeneityPrior.type !== 'precision'" ng-change="heterogeneityParamsChange()" style="display: inline; width:40%;">
        </div>
        <div class="columns large-2 text-right end">
          shape:
          <input type="number" ng-model="model.heterogeneityPrior.values.shape" id="heterogeneity-gamma-parameter2-input" ng-disabled="model.heterogeneityPrior.type !== 'precision'" ng-change="heterogeneityParamsChange()" style="display: inline; width:40%;">
        </div>
      </div>
    </div>
  </div>
  <!-- end heterogeneity prior section -->
  <div class="row">
    <div class="columns large-8 medium-10 small-12" style="padding-left: 1.2rem;">
      <div ng-show="model.outcomeScale.value <= 0 ">
        <label class="alert">Outcome scale value can not zero or lower.</label>
      </div>
      <div ng-show="model.outcomeScale.type === 'fixed' && !isNumber(model.outcomeScale.value) ">
        <label class="alert">Outcome scale value is not a valid number.</label>
      </div>
      <label style="margin-bottom:1rem;"><strong>Relative effect priors:</strong> N(0, (15 &#8901; <span ng-show="model.outcomeScale.type !== 'fixed'">S</span><span ng-show="model.outcomeScale.type === 'fixed'">{{model.outcomeScale.value}}</span>)<sup>2</sup>)</label>
      <label style="margin-bottom:1rem;"><strong>Random effects SD prior:</strong> U(0, <span ng-show="model.outcomeScale.type !== 'fixed'">S</span><span ng-show="model.outcomeScale.type === 'fixed'">{{model.outcomeScale.value}}</span>)</label>
    </div>
  </div>
  <!-- end outcome measure scale section -->
  <run-length problem="problem" model="cleanModel" burn-in-iterations="model.burnInIterations" inference-iterations="model.inferenceIterations" thinning-factor="model.thinningFactor" is-valid-run-length="isValidRunLength"></run-length>
  <div class="row bottom-button-bar">
    <div class="large-9 columns">
      <button id="submit-add-model-btn" class="success" type="submit" ng-disabled="!isValidRunLength || isAddButtonDisabled(model)">
        Create Model(s)
      </button>
      <div class="alert" ng-show='!model.title'>Model title missing.</div>
    </div>
  </div>
</form>
